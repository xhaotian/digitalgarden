---
{"modified":["2026-02-05"],"dg-publish":true,"permalink":"/Boxes/windows系统中OpenCode默认代理设置/","dgPassFrontmatter":true}
---

## 默认代理（OpenCode CLI）：用系统环境变量设置（推荐、最像“默认”）

OpenCode 的代理**不是**写在 `opencode.json` 里，而是读取标准环境变量（这是它的工作方式）。所以要实现“默认代理”，最佳方式就是把代理写进 **Windows 系统环境变量**，这样你以后每次打开终端运行 `opencode` 都会自动走代理。

你用海豚湾的端口：

- HTTP(S) 代理：`127.0.0.1:4780`（推荐用这个）
- SOCKS：`127.0.0.1:4781`

### 需要新增/修改这 3 个环境变量

（值照抄即可）

- `HTTPS_PROXY` = `http://127.0.0.1:4780`
- `HTTP_PROXY` = `http://127.0.0.1:4780`
- `NO_PROXY` = `localhost,127.0.0.1`

> `NO_PROXY` 这条很关键：避免本机地址也走代理导致异常。

### 在 Windows 11 里设置路径

1. 开始菜单 → 搜索：**“编辑系统环境变量”**
2. 打开后点右下角：**环境变量(N)...**
3. 在“用户变量”（或“系统变量”）里点“新建”，把上面 3 个变量加进去
4. 全部确定保存
5. **关闭并重新打开**终端（让新变量生效）
6. 再运行 `opencode`