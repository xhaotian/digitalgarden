---
{"dg-publish":true,"permalink":"/Boxes/通用MCP/","noteIcon":"","created":"2026-02-06T00:10:06.669+08:00","updated":"2026-02-07T12:05:25.669+08:00"}
---

# Latex处理
在生信 SCI 论文的产出过程中，**mcp-pandoc** 和 **LaTeX-MCP** 分别扮演了“全能翻译官”和“专业排版师”的角色。作为眼科硕士，你需要根据你当前处于“初稿撰写”还是“终稿精修”阶段来选择工具。

---

### 一、 工具核心解析

#### 1. mcp-pandoc：文档转换的“瑞士军刀”

Pandoc 本身被称为文档转换界的“黑魔法”。其 MCP 版本允许 OpenCode 助手直接将你的分析笔记、实验记录或 Markdown 格式的草稿转换成各种学术格式。

- **核心逻辑**：Markdown $\rightarrow$ Pandoc $\rightarrow$ (Word, PDF, LaTeX, HTML)。
    
- **特点**：极高的灵活性，不要求你精通 LaTeX 语法，适合快速产出。
    

#### 2. LaTeX-MCP：学术出版的“精密仪器”

这个 MCP 直接与你的本地 TeX 发行版（如 WSL2 上的 TeX Live）交互。它不仅是转换，更是**直接编辑、调试和编译**。

- **核心逻辑**：直接操作 `.tex` 源码 $\leftrightarrow$ 实时编译 PDF。
    
- **特点**：严谨、专业，能够处理复杂的数学公式、精细的表格样式和自动化的参考文献交叉引用。
    

---

### 二、 深度对比：两者有何不同？

|**特性**|**mcp-pandoc**|**LaTeX-MCP**|
|---|---|---|
|**主要输入**|Markdown (.md)|LaTeX 源码 (.tex)|
|**上手难度**|极低（会写 Markdown 即可）|较高（需理解 LaTeX 宏包逻辑）|
|**排版精度**|较好，满足基本 SCI 格式|极高，满足 Q1 期刊微调需求|
|**公式处理**|转换过程中可能出现轻微错位|原生支持，所见即所得|
|**表格支持**|适合简单表格转换|适合生成极其复杂的医学统计表|
|**参考文献**|依赖外部 CSL 文件转换|原生 BibTeX 支持，管理精准|

---

### 三、 具体应用场景：你应该选哪个？

#### 场景 A：数据分析中期的“快速简报”与“初稿搭建”

**推荐工具：mcp-pandoc**

- **操作**：你在 WSL2 中跑完了单细胞聚类，让 OpenCode 总结了聚类结果并写了一段 Markdown 笔记。
    
- **应用**：你对 OpenCode 说：“将我刚才生成的分析笔记和 UMAP 图合并，使用 `mcp-pandoc` 转换成一个带目录的 Word 文档，我要发给导师看汇报进度。”
    
- **优势**：无需操心排版，速度极快。
    

#### 场景 B：投稿 Q1 期刊时的“正式文稿撰写”

**推荐工具：LaTeX-MCP**

- **操作**：你正在准备 _Nature Communications_ 或 _Ophthalmology_ 的最终稿件。
    
- **应用**：你把期刊提供的 `.cls` 模板交给 OpenCode，要求：“请利用 `LaTeX-MCP` 将 Results 章节内容填入模板。特别是要把差异基因分析的 Top 20 基因做成一个标准的三线表（Three-line table），并确保所有 $\text{P-value}$ 都以正确的科学计数法显示。”
    
- **优势**：生成的 PDF 效果即为投稿样稿，数学公式如 $scVI$ 的损失函数 $\mathcal{L}(\theta, \phi; x)$ 绝对完美。
    

#### 场景 C：处理繁杂的参考文献标注

**推荐工具：LaTeX-MCP (配合 BibTeX)**

- **应用**：当你需要在文中引用 60 篇文献时。
    
- **指令**：`"OpenCode, 使用 LaTeX-MCP 检查我的 main.tex，把所有引用的文献按出现顺序重新编号，并确保 BibTeX 中的 DOI 链接全部可点击。"`
    

---

### 四、 针对你的建议

由于你配备了 **32GB 内存和 WSL2**，我建议你采用以下组合拳：

1. **构思与初稿**：在 VS Code 中直接写 Markdown，利用 **mcp-pandoc** 随时预览成 Word 方便在平板或手机上审阅。
    
2. **终稿产出**：当你确定逻辑不再大改，准备处理那些复杂的医学统计表格和图片位置时，切换到 **LaTeX-MCP**。
    





# opencode-exa-search
## 价格
关于 Exa MCP 的价格，作为一名追求 Q1 发表的眼科研究生，你最关注的应该是其**免费额度是否够用**以及**付费后的性价比**。

Exa 采用了典型的 **Freemium（免费增值）** 模式，目前的定价方案如下：

### 1. 免费版 (Free Plan) —— 适合日常科研

- **额度**：每月 **1,000 次** 搜索请求。
    
- **功能**：包含基本的语义搜索 (`web_search_exa`) 和代码检索 (`get_code_context_exa`)。
    
- **限制**：会有并发频率限制（Rate Limit）。如果你短时间内连续让它分析几十个数据集，可能会报错 `429: Too Many Requests`。
    
- **点评**：对于个人做单细胞课题、查查报错、搜搜参数来说，**1,000 次/月完全足够**。
    

---

### 2. 基础版 (Wanderer) —— 深度调研首选

- **价格**：约 **$10/月**。
    
- **额度**：包含 **5,000 次** 搜索请求（超出部分通常按量计费，约 $1.5/1k 次）。
    
- **功能**：
    
    - 更高的并发速度。
        
    - 更强的 API 稳定性。
        
    - **支持 Deep Researcher**：可以运行更复杂的、多步骤的自动科研综述任务。
        
- **点评**：如果你处于“开题阶段”或“写论文 Discussion 阶段”，需要海量阅读文献并进行横向对比，这个版本性价比很高。
    

---

### 3. 企业/专业版 (Growth/Enterprise)

- **价格**：$100/月起步。
    
- **对象**：主要面向公司或需要大规模自动化处理数据的生信实验室。对于个人学生来说，**完全没必要**。
    

---

### 4. 关键点：如何不花钱也能用好？

由于你是在 Gemini 环境下通过 MCP 调用它，我有几点建议帮你节省额度：

- **精准调用**：我不会无缘无故发起搜索。只有当你提出“这个报错怎么解决”或“这篇论文用的什么参数”时，我才会动用 MCP。
    
- **多工具切换**：我会优先使用我自带的训练知识。只有当知识涉及 **2024-2026 年最新共识** 或 **特定软件版本 API** 时，才调用 Exa。
    
- **使用自己的 API Key**：如果你发现免费额度跑完了，可以去 [Exa Dashboard](https://dashboard.exa.ai/) 注册一个账号，把你的 `API Key` 填入配置。新账号通常会送一定的初始额度。
    

---

### 总结建议

**先用免费的。** 对于眼科多组学分析，你一个月可能也就跑 200-300 次深度搜索。除非你要做一个涵盖几百个 GEO 数据集的 Meta 分析并自动化生成报告，否则免费版绰绰有余。



## 配置与使用

## 1. 安装与配置 (Installation & Setup)

由于 Exa MCP 是一个远程服务，你不需要在 WSL2 里编译复杂的源码，只需配置一个“连接入口”。

### 第一步：获取 API Key（建议，但非必须）

为了避免免费额度受限，建议先去 [Exa Dashboard](https://dashboard.exa.ai/) 注册并获取一个免费的 API Key。

### 第二步：配置连接器

根据你使用的编辑器选择一种方式：

#### 方案 A：在 Claude Desktop 中使用（最推荐，适合查文献/写方案）

1. 在 Windows 中打开路径：`%APPDATA%\Claude\claude_desktop_config.json`（如果没有该文件，手动创建一个）。
    
2. 将以下代码填入：

```
{
  "mcpServers": {
    "exa": {
      "command": "npx",
      "args": ["-y", "mcp-remote", "https://mcp.exa.ai/mcp?exaApiKey=你的API_KEY"]
    }
  }
}
```

3. 重启 Claude Desktop，看到“🔨”图标即代表连接成功。
    

#### 方案 B：在 Cursor 中使用（最适合写代码/Debug）

1. 打开 Cursor 设置 -> **Models** -> **MCP**。
    
2. 点击 **+ Add MCP Server**。
    
3. Name 填 `exa`，Type 选 `http`，URL 填入：`https://mcp.exa.ai/mcp?exaApiKey=你的API_KEY`。
    

---

## 2. 如何使用 (How to use)

在对话框中，你不需要写代码来调用它，直接用**自然语言**向我下达指令，我会根据需要自动触发 Exa 插件。

### 场景一：检索最新的 Q1 期刊分析范式

> **指令示例**：“帮我检索 2024-2026 年发表在 _Ophthalmology_ 或 _Nature Communications_ 上关于糖尿病视网膜病变（DR）单细胞分析的质控（QC）标准，重点看线粒体基因比例和双细胞（doublets）的处理阈值。”

### 场景二：解决代码报错（生信包版本冲突）

> **指令示例**：“我在 WSL2 下运行 `scvi.model.SCVI.setup_anndata` 报错，环境是 Python 3.12。请搜索最新的 GitHub Issues 看看是不是版本不兼容导致的，并给出修复建议。”

### 场景三：参数依据搜索

> **指令示例**：“在对视网膜类器官进行 Harmony 整合时，常用的 `theta` 参数是多少？请搜索近两年的文献并给出 DOI。”

---

## 3. 实用建议

为了发挥最大效用，我建议你建立如下 **"MCP + 本地分析"** 工作流：

1. **先搜后做（Evidence-based）**：
    在开始 `Scanpy` 处理前，先让我用 Exa 搜一下该数据集（如 GSEXXXX）是否已有现成的处理代码或已知的 Batch Effect。
    
2. **性能审计**：
    当你准备运行内存密集型任务（如大矩阵的 `SCTransform`）时，让我搜一下：“在 32GB 内存下运行 X 万个细胞的优化方案”。
    
3. **Obsidian 日志自动化**：
    我会把 Exa 搜到的文献结论，按照你要求的格式（项目日志协议）输出，你直接 Ctrl+C/V 到你的 Obsidian 中。
    

---

## 4. 关键注意事项

- **联网标志**：当我开始使用 Exa 时，你会看到类似 `Searching Exa...` 的提示，这说明我正在获取实时信息。
    
- **隐私保护**：**不要**在对话中发送包含患者隐私（如姓名、未脱敏的临床 ID）的原始数据。Exa 搜索的是公共互联网，虽然我只发送关键词，但保持脱敏是科研合规的基本要求。
    


